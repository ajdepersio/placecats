<html>

<head>
    <link rel="stylesheet" type="text/css" href="css/shoelace.css">
    <link rel="stylesheet" href="css/site.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
    <script type="application/javascript" src="js/shoelace.js"></script>
    <!-- TODO: Move this into it's own file -->
    <script type="text/javascript">
        const authKey = new URLSearchParams(window.location.search).get("key");
        $(document).ready(function() {
            loadImagesForReview();
        });

        function loadImagesForReview() {
            $.ajax({
                type: "GET",
                url: `http://localhost:3000/admin/review?key=${authKey}`,
                success: function(data, textStatus, jqXHR){
                    populateImageReview(data);
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("Error retrieving review images.");
                }
            });
        }

        function populateImageReview(paths) {
            paths.forEach(path => {
                var imageReviewTemplate = document.querySelector('#image-review-template').content;
                var image = imageReviewTemplate.querySelector('.review-image');
                image.src = "http://localhost:3000/" + path;

                document.querySelector('#image-review-container').appendChild(
                    document.importNode(imageReviewTemplate, true)
                );
            });
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="row">
            <div class="col-2">
                <img width="100%" class="align-right" src="assets/logo-black.png" alt="header">
            </div>
            <div class="col-6 offset-1">
                <h1 class="align-center" >Admin Page</h1>
            </div>
            <div class="col-2 offset-1">
                <img width="100%" class="align-left" src="assets/logo-black.png" alt="header">
            </div>
        </div>
        <hr>
        <div class="row">
        </div>
    </div>

    <div id="image-review-container">
        <template id="image-review-template">
            <div class="row">
                <div class="col-3 offset-3">
                    <img class="img-responsive review-image" src="" alt="Image">
                </div>
                <div class="col-3">
                    <button type="button">Standard</button>
                    <button type="button">Tall</button>
                    <button type="button">Wide</button>
                    <button type="button">Square</button>
                    <button type="button">Panorama</button>
                    <button type="button" class="button-danger">Reject</button>
                </div>
            </div>
        </template>
    </div>
</body>

</html>